<%- include("control") %>
<link rel="stylesheet" href="../css/filters.css" type="text/css">
    <div class="row">
        <div class="col-md-12">
            <h2>All Reservations</h2>
        </div>
    </div>
    <hr />

    <div class="panel-body">
        <form action="search" method="post">
            <input type="checkbox" id="menu">
            <label for="menu">Search</label>
            <div class="collapsible-container">
                <div class=" filters-container">

                    <div class="block1">
                        <span class="filter-text">Reservation ID:</span>
                        <input type="number" class="input_field filters-input-field" name="search_res_resID">
                    </div>

                    <div class="block2">
                        <span class="filter-text">Customer ID:</span>
                        <input type="number" class="input_field filters-input-field" name="search_res_customerID">
                    </div>

                    <div class="block3">
                        <span class="filter-text">Car ID:</span>
                        <input type="number" class="input_field filters-input-field" name="search_res_carID">
                    </div>

                    <div class="block4">
                        <span class="filter-text">First name:</span>
                        <input type="text" class="input_field filters-input-field" name="search_res_fname">
                    </div>

                    <div class="block5">
                        <span class="filter-text">Rented:</span>
                        <select name="search_res_rented" class="input_field filters-input-field">
                            <option value="" selected>All</option>
                            <option value="Yes" >Yes</option>
                            <option value="No" >No</option>
                        </select>
                    </div>

                    <div class="block8">
                        <span class="filter-text">Start from:</span>
                        <input type="date" class="input_field filters-input-field" name="search_res_sdate">
                    </div>

                    <div class="block9">
                        <span class="filter-text">End at:</span>
                        <input type="date" class="input_field filters-input-field" name="search_res_edate">
                    </div>

                    <div class="block6">
                    <button class="filters_btn" name="search_btn" value="search_reservations"
                    type="submit">Apply</button>
                </div>
                </div>
                
            </div>
        </form>


        <p class="search_message">
            <%= search_message %>
        </p>


        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
                <thead class="bg-color-red">
                    <tr>
                        <th>#</th>
                        <th>Reserve No</th>
                        <th>Customer name</th>
                        <th>Customer ID</th>
                        <th>Car ID</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Rented</th>
                    </tr>
                </thead>
                <tbody>
                    <% for(var i=0; i < reservations.length; i++){ %>
                        <tr>
                            <th>
                                <%= i+1 %>
                            </th>
                            <th>
                                <%= reservations[i].reserve_no %>
                            </th>
                            <th>
                                <%= reservations[i].fname %> <%= reservations[i].lname %>
                            </th>
                            <th>
                                <%= reservations[i].customer_id %>
                            </th>
                            <th>
                                <%= reservations[i].car_id %>
                            </th>
                            <th>
                                <%= reservations[i].startD.toLocaleString("sv-SE") %>
                            </th>
                            <th>
                                <%= reservations[i].endD.toLocaleString("sv-SE") %>
                            </th>
                            <th>
                                <%= reservations[i].rented %>
                            </th>
                        </tr>
                        <% } %>
                </tbody>
            </table>
        </div>
        <form action="/admin" method="post">
            <div class="orange-button">
                <button name="control_btn" value="add_res" type="submit" class="btn btn-danger square-btn">Add</button>
            </div>
        </form>

        <div class="row">
            <form action="/change" method="post">
                <select name="index" class="input_field" >
                    <option value=""  disabled selected >Reserve No.</option>
                    <% for(var i=0; i < reservations.length; i++){ %>
                        <option value="<%= reservations[i].reserve_no %>">
                            <%= reservations[i].reserve_no %> %>
                        </option>
                        <% } %>
                </select>
                <br>
                <div class="orange-button" style="float: left !important;">
                    <button name="delete_btn" value="delete_res" type="submit"
                        class="btn btn-danger square-btn">Delete</button>
                </div>
            </form>
        </div>
    </div>
    </div>
    <%- include("control_footer") %>